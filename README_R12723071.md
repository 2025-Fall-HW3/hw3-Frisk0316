# 2025-Spring-HW3

學號：R12723071 \
姓名：陳芃

**在選擇 GitHub Classroom 時誤按一名學號為 D10 開頭之同學，故在此另立新的 Markdown file 作為聲明**

## Part 1

### Markowitz.py 修改

### Problem 1:

In an equal weight portfolio, each asset is allocated an identical proportion of the total investment, regardless of the characteristics of the assets. This strategy assumes all assets will contribute equally to the portfolio’s risk and
return.

```bash
# 1. 計算資產數量
n_assets = len(assets)

# 2. 設定等權重 (1/N)
weight = 1.0 / n_assets
        
# 3. 將權重填入對應資產
self.portfolio_weights[assets] = weight
```

### Problem 2:

Risk Parity is a portfolio allocation strategy aimed at allocating capital such that each asset contributes equally to the overall risk of the portfolio. This objective is typically achieved by adjusting the portfolio weights inversely to the volatility of the assets.

$$
w_i = \frac{\frac{1}{\sigma_i}}{\sum_{j=1}^{m} \frac{1}{\sigma_j}},
$$

```bash
# 1. 取得視窗內的報酬率數據 (不包含當天)
R_n = df_returns[assets].iloc[i - self.lookback : i]
            
# 2. 計算波動率 (標準差)
volatility = R_n.std()
            
# 3. 計算波動率倒數 (Inverse Volatility)
inv_volatility = 1.0 / volatility
            
# 4. Normalization
sum_inv_vol = inv_volatility.sum()
weights = inv_volatility / sum_inv_vol
            
# 5. 填入權重
self.portfolio_weights.loc[df.index[i], assets] = weights
```

### Problem 3:

The Mean-Variance Portfolio strategy employs modern portfolio theory’s foundational principles, aiming to maximize the risk-adjusted return.

$$
\max_{w} \left( w^{\top} \mu - \frac{\gamma}{2} w^{\top} \Sigma w \right)
$$

```bash
# 1. 定義變數 w (0 <= w <= 1)
w = model.addMVar(n, lb=0.0, ub=1.0, name="w")
                
# 2. 定義目標函數: maximize (mu.T * w - (gamma/2) * w.T * Sigma * w)
return_term = mu @ w
risk_term = w @ Sigma @ w
                
obj = return_term - 0.5 * gamma * risk_term
model.setObjective(obj, gp.GRB.MAXIMIZE)
                
# 3. 限制條件: 權重總和為 1 (Full investment)
model.addConstr(w.sum() == 1, name="budget")
```

## Part 2

### Markowitz_2.py 修改


